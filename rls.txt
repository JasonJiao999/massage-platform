services分离身份的策略
格式：
  
CASE
    WHEN (auth.role() = 'authenticated'::text) THEN
    CASE ( SELECT profiles.role
           FROM profiles
          WHERE (profiles.id = auth.uid()))
        WHEN 'admin'::text THEN true
        WHEN 'merchant'::text THEN (shop_id = ( SELECT shops.id
           FROM shops
          WHERE (shops.owner_id = auth.uid())))
        WHEN 'freeman'::text THEN (auth.uid() = owner_id)
        WHEN 'staff'::text THEN (auth.uid() = owner_id)
        WHEN 'customer'::text THEN (EXISTS ( SELECT 1
           FROM profiles
          WHERE ((profiles.id = services.owner_id) AND (profiles.is_active = true))))
        ELSE false
    END
    WHEN (auth.role() = 'anon'::text) THEN (EXISTS ( SELECT 1
       FROM profiles
      WHERE ((profiles.id = services.owner_id) AND (profiles.is_active = true))))
    ELSE false
END